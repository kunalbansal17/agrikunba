(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{479:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(6029),s=n(5729);let l=[{key:"en",label:"English"},{key:"hi",label:"हिंदी"},{key:"mr",label:"मराठी"}],a={en:{title:"\uD83C\uDF31 KrishiGPT — India’s Agriculture Guide",definition:"KrishiGPT is your multilingual, safe, and farmer-friendly AI advisor. Get instant help on crops, cattle, fisheries,  mandi prices and more. ",suggestions:["\uD83C\uDF31 Will it rain tomorrow for my cotton spray?","\uD83D\uDC04 My cow is not eating due to heat — what to do?","☁️ PM-KISAN money not credited — who to contact?","\uD83C\uDF44 Mushrooms are browning — how to fix?"],inputPlaceholder:"Ask about crops, cattle, fisheries, weather, PM-KISAN…",micTip:"Speak your question",send:"Send"},hi:{title:"\uD83C\uDF31 KrishiGPT — भारत का कृषि मार्गदर्शक",definition:"KrishiGPT आपका बहुभाषी, सुरक्षित और किसान-हितैषी एआई सलाहकार है। फसल, पशुधन, मत्स्य, हाइड्रोपोनिक्स, मंडी भाव और अधिक पर तुरंत मदद पाएं।",suggestions:["\uD83C\uDF31 क्या कल कपास पर छिड़काव के समय बारिश होगी?","\uD83D\uDC04 मेरी गाय गर्मी से नहीं खा रही — क्या करें?","☁️ पीएम-किसान का पैसा नहीं आया — किससे संपर्क करें?","\uD83C\uDF44 मशरूम भूरे हो रहे हैं — क्या उपाय करें?"],inputPlaceholder:"फसल, पशु, मत्स्य, मौसम, पीएम-किसान… पूछें",micTip:"अपना प्रश्न बोलें",send:"भेजें"},mr:{title:"\uD83C\uDF31 KrishiGPT — भारताचे कृषी मार्गदर्शक",definition:"KrishiGPT हा तुमचा बहुभाषिक, सुरक्षित आणि शेतकरी-हितकारी एआय सल्लागार आहे. पिके, जनावरे, मत्स्य, हायड्रोपोनिक्स, बाजारभाव यावर त्वरित मदत मिळवा.",suggestions:["\uD83C\uDF31 उद्या कापूस फवारणीला पाऊस पडेल का?","\uD83D\uDC04 उष्णतेमुळे माझी गाय खात नाही — काय करावे?","☁️ पीएम-किसान पैसे जमा झाले नाहीत — कोणाशी संपर्क करावा?","\uD83C\uDF44 मशरूम तपकिरी होत आहेत — काय उपाय?"],inputPlaceholder:"पिके, जनावरे, मत्स्य, हवामान, पीएम-किसान… विचारा",micTip:"आपला प्रश्न बोला",send:"पाठवा"}};function r(){let[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)(""),[o,d]=(0,s.useState)("en"),[c,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(!1),[g,x]=(0,s.useState)([]),[p,f]=(0,s.useState)(null),y=(0,s.useRef)(null);async function b(i){if(null==i||i.preventDefault(),!n.trim()||c)return;h||m(!0);let s=[...e,{role:"user",content:n}];async function l(){return"geolocation"in navigator?new Promise(e=>{navigator.geolocation.getCurrentPosition(t=>e({lat:t.coords.latitude,lon:t.coords.longitude}),()=>e(null),{enableHighAccuracy:!0,timeout:8e3})}):null}t(s),r(""),u(!0);try{let e=await l(),i=await fetch("/api/krishigpt/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:n,lang:o,loc:e})});if(!i.body){let e=await i.text();t([...s,{role:"assistant",content:e}]),u(!1);return}t(e=>[...e,{role:"assistant",content:""}]);let a=i.body.getReader(),r=new TextDecoder,d=i.headers.get("x-assistant-id");d&&f(d);let c=!1;for(;!c;){let{value:e,done:n}=await a.read();c=n;let i=r.decode(e||new Uint8Array,{stream:!c});i&&t(e=>{let t=e[e.length-1];if(!t||"assistant"!==t.role)return e;let n=[...e];return n[n.length-1]={role:"assistant",content:t.content+i},n})}if(p)try{let e=await fetch("/api/krishigpt/suggestions?assistantId=".concat(p));if(e.ok){let{suggestions:t}=await e.json();x(t||[])}}catch(e){}}finally{u(!1)}}return(0,i.jsxs)("div",{className:"flex flex-col  shadow-md items-center justify-start min-h-screen md:rounded-lg  bg-gray-50 p-4 md:p-6",children:[h&&(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-700 mb-3",children:a[o].title}),(0,i.jsx)("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:l.map(e=>(0,i.jsx)("button",{onClick:()=>d(e.key),className:"rounded-full px-3 py-1 text-xs ring-1 ".concat(o===e.key?"bg-emerald-600 text-white ring-emerald-600":"bg-white text-gray-700 ring-gray-300"),children:e.label},e.key))}),(0,i.jsxs)("div",{className:"w-full bg-white shadow-md overflow-y-auto mb-4 h-[70vh] md:h-[70vh] md:max-w-6xl md:rounded-lg md:p-6 rounded-none px-4 py-4",children:[0===e.length?(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-400",children:[(0,i.jsx)("div",{className:"text-5xl mb-4",children:"\uD83E\uDD16\uD83C\uDF3E\uD83D\uDC04\uD83C\uDF26️\uD83D\uDC1F"}),(0,i.jsx)("h2",{className:"text-xl font-semibold",children:a[o].title}),(0,i.jsx)("p",{className:"mt-2 max-w-md text-sm",children:a[o].definition}),(0,i.jsx)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3",children:a[o].suggestions.map(e=>(0,i.jsx)("button",{onClick:()=>r(e),className:"rounded-lg bg-gray-50 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100",children:e},e))})]}):e.map((e,t)=>(0,i.jsx)("div",{className:"mb-3 ".concat("user"===e.role?"text-right":"text-left"),children:(0,i.jsx)("div",{className:"inline-block px-4 py-3 rounded-lg text-sm whitespace-pre-line ".concat("user"===e.role?"bg-emerald-500 text-white":"bg-gray-100 text-gray-800"),children:e.content})},t)),g.length>0&&(0,i.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:g.map((e,t)=>(0,i.jsx)("button",{onClick:()=>r(e),className:"rounded-full bg-emerald-50 text-emerald-700 px-3 py-1 text-sm hover:bg-emerald-100",children:e},t))}),c&&(0,i.jsx)("div",{className:"text-gray-400 text-sm",children:"Thinking…"})]}),(0,i.jsxs)("form",{onSubmit:b,className:"flex w-full md:max-w-6xl border border-gray-300 rounded-lg overflow-hidden",children:[(0,i.jsx)("input",{value:n,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b())},className:"flex-1 border-none px-3 py-3 focus:outline-none",placeholder:a[o].inputPlaceholder}),(0,i.jsx)("button",{type:"button",onClick:function(){let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return alert("Speech recognition not supported");let t=new e;t.lang="en"===o?"en-IN":"hi-IN",t.onresult=e=>{r(e.results[0][0].transcript)},t.start(),y.current=t},className:"bg-gray-100 px-4 py-3 border-l border-gray-300",title:a[o].micTip,children:"\uD83C\uDFA4"}),(0,i.jsx)("button",{type:"submit",disabled:c,className:"bg-emerald-600 text-white px-9 py-2 font-semibold hover:bg-emerald-700 disabled:opacity-60",children:a[o].send})]})]})}},3605:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/krishigpt/live",function(){return n(479)}])}},e=>{e.O(0,[636,593,792],()=>e(e.s=3605)),_N_E=e.O()}]);